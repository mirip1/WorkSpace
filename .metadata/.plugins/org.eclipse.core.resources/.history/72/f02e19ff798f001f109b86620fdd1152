package pcp.unidad1.relacion07_2;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;

public class MaestroSumadorApp {

  private static final String RUTA = "C:\\Users\\mivel\\eclipse-workspace\\Actividad_1.07\\src";

  public static void main(String[] args) {

    if (args.length != 2) {
      System.err.println("Se deben introducir dos argumentos");
    } else if (!isNumero(args[1]) || !isNumero(args[0])) {
      System.err.println("Los parametros introducidos deben ser de tipo entero");
    }

    int numero1 = Integer.parseInt(args[0]);
    int numero2 = Integer.parseInt(args[1]);

    try {
      int diferencia = Math.abs(numero1 - numero2);

      if (diferencia < 25) {
        ProcessBuilder pb = new ProcessBuilder("java", "-cp", RUTA,
            "pcp.unidad1.relacion07_2.SumadorProdess, " + numero1 + ", " + numero2);
        Process process = pb.start();
        process.waitFor();

      } else if (diferencia >= 25 && diferencia <= 100) {
        for (int i = 0; i != 2; i++) {
          ProcessBuilder pb = new ProcessBuilder("java", "-cp", RUTA, "pcp.unidad1.relacion07_2.SumadorProcess");
          Process process = pb.start();

        }

      }

    } catch (Exception e) {
      e.printStackTrace();
    }
    File archivo = new File("temporal.txt");
    try(BufferedReader rd = new BufferedReader( new FileReader(archivo))){
      
      String linea = rd.readLine();
      System.out.println(linea);
      archivo.delete();
      
    } catch (Exception e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
    }
    

  }

  public static boolean isNumero(String cadena) {

    boolean resultado;

    try {
      Integer.parseInt(cadena);
      resultado = true;
    } catch (NumberFormatException excepcion) {
      resultado = false;
    }

    return resultado;
  }

}
